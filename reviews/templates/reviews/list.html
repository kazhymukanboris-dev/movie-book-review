{% extends 'reviews/base.html' %}
{% load static %}  {% block content %}
<div class="container" style="padding: 40px 8%;">
    <div style="margin-bottom: 3rem;">
        <h2 style="font-size: 2.5rem; font-weight: 700;">Explore {{ title }}</h2>
        <p style="color: var(--primary); font-weight: 600; letter-spacing: 2px;">COMMUNITY FEED</p>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 2.5rem;">
        {% for item in items %}
        <div class="glass-card" style="background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; overflow: hidden; transition: 0.4s;">
            
            <div style="height: 350px; position: relative;">
                {% if item.image_url %}
                    <img src="{{ item.image_url }}" alt="{{ item.title }}" style="width: 100%; height: 100%; object-fit: cover;">
                {% else %}
                    <div style="width: 100%; height: 100%; background: #1e293b; display: flex; align-items: center; justify-content: center; font-size: 3rem;">ðŸŽ¬</div>
                {% endif %}
                <div style="position: absolute; top: 15px; right: 15px; background: rgba(0,0,0,0.6); padding: 4px 10px; border-radius: 8px; font-size: 0.8rem; border: 1px solid var(--primary);">{{ item.release_year }}</div>
            </div>

            <div style="padding: 1.5rem;">
                <h3 style="font-size: 1.6rem; color: #fff; margin-bottom: 0.2rem;">{{ item.title }}</h3>
                <p style="color: var(--primary); font-size: 0.9rem; margin-bottom: 1rem; font-weight: 600;">{{ item.author_or_director }}</p>
                
                <p style="font-size: 0.95rem; color: #cbd5e1; line-height: 1.6; margin-bottom: 1.5rem;">
                    {{ item.description|truncatewords:30 }}
                </p>

                <h4 style="font-size: 0.8rem; color: #fff; margin-bottom: 0.8rem; text-transform: uppercase; letter-spacing: 1px;">User Reviews</h4>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    {% for review in item.reviews.all %}
                    <div style="background: rgba(0,0,0,0.2); padding: 12px; border-radius: 12px; border-left: 3px solid var(--primary);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                            <span style="font-size: 0.8rem; font-weight: 700; color: #fff;">@{{ review.user.username }}</span>
                            <span style="color: #fbbf24; font-size: 0.75rem;">{{ review.rating }}â˜…</span>
                        </div>
                        <p style="font-size: 0.85rem; color: #94a3b8; font-style: italic;">"{{ review.comment }}"</p>
                    </div>
                    {% empty %}
                    <p style="font-size: 0.8rem; opacity: 0.5;">No reviews yet.</p>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}